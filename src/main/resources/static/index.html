<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ðŸŽƒCheating-Box</title>
</head>
<body>
    <h1>Welcome to ðŸŽƒCheating-Box ðŸš€</h1>

    <!-- ADD USER -->
    <h2>Add User</h2>
    <input type="text" id="username" placeholder="Enter username">
    <input type="password" id="password" placeholder="Enter password">
    <button onclick="addUser()">Add User</button>

    <!-- GET ALL USERS -->
    <h2>All Users</h2>
    <button onclick="getUsers()">Get Users</button>
    <pre id="users"></pre>

    <!-- UPDATE USER -->
    <h2>Update User</h2>
    <input type="text" id="updateId" placeholder="Enter user ID">
    <input type="text" id="updateUsername" placeholder="Enter new username">
    <input type="password" id="updatePassword" placeholder="Enter new password">
    <button onclick="updateUser()">Update User</button>

    <!-- DELETE USER -->
    <h2>Delete User</h2>
    <input type="text" id="deleteId" placeholder="Enter user ID">
    <button onclick="deleteUser()">Delete User</button>

    <script>
        // CREATE USER
        async function addUser() {
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;

            const res = await fetch("/testdb/add", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ username, password })
            });
            const data = await res.json();
            alert("User Added: " + JSON.stringify(data));
        }

        // READ USERS
        async function getUsers() {
            const res = await fetch("/testdb/all");
            const data = await res.json();
            document.getElementById("users").innerText = JSON.stringify(data, null, 2);
        }

        // UPDATE USER
        async function updateUser() {
            const id = document.getElementById("updateId").value;
            const username = document.getElementById("updateUsername").value;
            const password = document.getElementById("updatePassword").value;

            const res = await fetch(`/testdb/update/${id}`, {
                method: "PUT",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ username, password })
            });
            const data = await res.json();
            alert("User Updated: " + JSON.stringify(data));
        }

        // DELETE USER
        async function deleteUser() {
            const id = document.getElementById("deleteId").value;

            const res = await fetch(`/testdb/delete/${id}`, {
                method: "DELETE"
            });

            if (res.ok) {
                alert("User Deleted Successfully");
            } else {
                alert("Error deleting user");
            }
        }
    </script>
</body>
</html>
